From 58f428b46aebd0e0d0a4dc827735d9ba588e6a49 Mon Sep 17 00:00:00 2001
From: Josh Wu <josh.wu@atmel.com>
Date: Mon, 24 Sep 2012 14:50:45 +0800
Subject: [PATCH 055/138] mtd: atmel_nand: add 4k page nand flash support for
 PMECC.

---
 drivers/mtd/nand/atmel_nand.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/mtd/nand/atmel_nand.c b/drivers/mtd/nand/atmel_nand.c
index 13d1811..8c30898 100644
--- a/drivers/mtd/nand/atmel_nand.c
+++ b/drivers/mtd/nand/atmel_nand.c
@@ -1053,6 +1053,7 @@ static int __init atmel_pmecc_nand_init_params(struct platform_device *pdev,
 	/* set ECC page size and oob layout */
 	switch (mtd->writesize) {
 	case 2048:
+	case 4096:
 		host->pmecc_degree = PMECC_GF_DIMENSION_13;
 		host->pmecc_cw_len = (1 << host->pmecc_degree) - 1;
 		host->pmecc_sector_number = mtd->writesize / sector_size;
@@ -1078,7 +1079,6 @@ static int __init atmel_pmecc_nand_init_params(struct platform_device *pdev,
 		break;
 	case 512:
 	case 1024:
-	case 4096:
 		/* TODO */
 		dev_warn(host->dev,
 			"Unsupported page size for PMECC, use Software ECC\n");
-- 
1.7.10.4

