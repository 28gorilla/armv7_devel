From 1e60c833e197285ca73082abfbb7a996d768c043 Mon Sep 17 00:00:00 2001
From: Josh Wu <josh.wu@atmel.com>
Date: Fri, 6 Dec 2013 11:46:54 +0800
Subject: [PATCH 385/397] at91sam9m10g45: enable OV5640 support

Signed-off-by: Josh Wu <josh.wu@atmel.com>
---
 arch/arm/configs/at91sam9g45_defconfig  |  1 +
 arch/arm/mach-at91/board-sam9m10g45ek.c | 21 +++++++++++++++++++++
 2 files changed, 22 insertions(+)

diff --git a/arch/arm/configs/at91sam9g45_defconfig b/arch/arm/configs/at91sam9g45_defconfig
index e627f06..3cb0ddd 100644
--- a/arch/arm/configs/at91sam9g45_defconfig
+++ b/arch/arm/configs/at91sam9g45_defconfig
@@ -218,4 +218,5 @@ CONFIG_MEDIA_CAMERA_SUPPORT=y
 CONFIG_V4L_PLATFORM_DRIVERS=y
 CONFIG_SOC_CAMERA=y
 CONFIG_SOC_CAMERA_OV2640=y
+CONFIG_SOC_CAMERA_OV5642=y
 CONFIG_VIDEO_ATMEL_ISI=y
diff --git a/arch/arm/mach-at91/board-sam9m10g45ek.c b/arch/arm/mach-at91/board-sam9m10g45ek.c
index 3da9fed..d550fe6 100644
--- a/arch/arm/mach-at91/board-sam9m10g45ek.c
+++ b/arch/arm/mach-at91/board-sam9m10g45ek.c
@@ -246,6 +246,26 @@ static struct platform_device isi_ov2640 = {
 		.platform_data = &iclink_ov2640,
 	},
 };
+
+static struct i2c_board_info i2c_ov5640 = {
+	I2C_BOARD_INFO("ov5642", 0x3c),
+};
+
+static struct soc_camera_link iclink_ov5640 = {
+	.bus_id			= 0,
+	.board_info		= &i2c_ov5640,
+	.i2c_adapter_id		= 0,
+	.power			= i2c_camera_power,
+	.query_bus_param	= isi_camera_query_bus_param,
+};
+
+static struct platform_device isi_ov5640 = {
+	.name	= "soc-camera-pdrv",
+	.id	= 1,
+	.dev	= {
+		.platform_data = &iclink_ov5640,
+	},
+};
 #endif
 
 
@@ -454,6 +474,7 @@ static struct platform_device *devices[] __initdata = {
 #if defined(CONFIG_SOC_CAMERA_OV2640) || \
 	defined(CONFIG_SOC_CAMERA_OV2640_MODULE)
 	&isi_ov2640,
+	&isi_ov5640,
 #endif
 };
 
-- 
1.8.5.3

